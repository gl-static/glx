(self.webpackChunkchatting_webapp=self.webpackChunkchatting_webapp||[]).push([[171],{93733:(e,t,i)=>{"use strict";i.d(t,{Z:()=>u});var s=i(45697),n=i.n(s),r=i(67294),a=i(44012),l=i(58657),o=i(92337),c=i(74935);function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class u extends r.PureComponent{constructor(e){super(e),p(this,"onKeyDown",(e=>{this.props.shiftEnter&&e.keyCode===o.ZP.KeyCodes.ENTER&&e.shiftKey||!0!==this.props.disableEnterSubmit&&(0,c.pD)(e,o.ZP.KeyCodes.ENTER)&&this.props.submit&&"SELECT"!==e.target.tagName&&e.target.parentElement&&"react-select__input"!==e.target.parentElement.className&&!e.target.classList.contains("btn-cancel")&&this.settingList.current&&this.settingList.current.contains(e.target)&&this.handleSubmit(e)})),p(this,"handleSubmit",(e=>{e.preventDefault(),this.props.setting?this.props.submit(this.props.setting):this.props.submit()})),p(this,"handleUpdateSection",(e=>{this.props.updateSection(this.props.section),e.preventDefault()})),this.settingList=r.createRef()}componentDidMount(){if(this.settingList.current){const e=this.settingList.current.querySelectorAll('.btn:not(.save-button):not(.btn-cancel), input.form-control, select, textarea, [tabindex]:not([tabindex="-1"])');e.length>0?e[0].focus():this.settingList.current.focus()}document.addEventListener("keydown",this.onKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.onKeyDown)}render(){let e=null;this.props.clientError&&(e=r.createElement("div",{className:"form-group"},r.createElement("label",{id:"clientError",className:"col-sm-12 has-error"},this.props.clientError)));let t=null;this.props.serverError&&(t=r.createElement("div",{className:"form-group"},r.createElement("label",{id:"serverError",className:"col-sm-12 has-error"},this.props.serverError)));let i=null,s="setting-list__hint";"top"===this.props.infoPosition&&(s="pb-3"),this.props.extraInfo&&(i=r.createElement("div",{id:"extraInfo",className:s},this.props.extraInfo));let n="";this.props.submit&&(n=r.createElement(l.Z,{defaultMessage:this.props.saveButtonText,saving:this.props.saving,disabled:this.props.saving,onClick:this.handleSubmit}));const o=this.props.inputs;let c,p;c="full"===this.props.width?"col-sm-12":"medium"===this.props.width?"col-sm-10 col-sm-offset-2":"col-sm-9 col-sm-offset-3",this.props.title&&(p=r.createElement("h4",{id:"settingTitle",className:"col-sm-12 section-title"},this.props.title));let u,m=r.createElement("div",{className:"setting-list-item"},o,i);return"top"===this.props.infoPosition&&(m=r.createElement("div",null,i,o)),u=this.props.cancelButtonText?this.props.cancelButtonText:r.createElement(a.Z,{id:"setting_item_max.cancel",defaultMessage:"Cancel"}),r.createElement("section",{className:"section-max form-horizontal ".concat(this.props.containerStyle)},p,r.createElement("div",{className:c},r.createElement("div",{tabIndex:"-1",ref:this.settingList,className:"setting-list"},m,r.createElement("div",{className:"setting-list-item"},r.createElement("hr",null),this.props.submitExtra,t,e,n,r.createElement("button",{id:"cancelSetting",className:"btn btn-sm btn-cancel cursor--pointer style--none",onClick:this.handleUpdateSection},u)))))}}p(u,"defaultProps",{infoPosition:"bottom",saving:!1,section:"",containerStyle:""}),p(u,"propTypes",{inputs:n().node,containerStyle:n().string,clientError:n().oneOfType([n().string,n().object]),serverError:n().string,extraInfo:n().element,infoPosition:n().string,section:n().string,updateSection:n().func,setting:n().string,submit:n().func,disableEnterSubmit:n().bool,submitExtra:n().node,saving:n().bool,title:n().node,width:n().string,cancelButtonText:n().node,shiftEnter:n().bool,saveButtonText:n().string})},87878:(e,t,i)=>{"use strict";i.d(t,{Z:()=>m});var s=i(45697),n=i.n(s),r=(i(33948),i(67294)),a=i(44012),l=i(74935),o=i(86896);function c(){const{formatMessage:e}=(0,o.Z)();return r.createElement("i",{className:"icon-pencil-outline",title:e({id:"generic_icons.edit",defaultMessage:"Edit Icon"})})}function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class u extends r.PureComponent{constructor(...e){super(...e),p(this,"edit",null),p(this,"getEdit",(e=>{this.edit=e})),p(this,"handleUpdateSection",(e=>{e.preventDefault(),this.props.updateSection(this.props.section)}))}componentDidMount(){this.edit&&this.edit.focus()}render(){let e=null,t=null;return!this.props.disableOpen&&(0,l.tq)()?e=r.createElement("div",{className:"section-min__edit"},r.createElement("button",{id:this.props.section+"Edit",className:"color--link cursor--pointer style--none",onClick:this.handleUpdateSection,ref:this.getEdit,"aria-labelledby":this.props.section+"Title "+this.props.section+"Edit"},r.createElement(c,null),this.props.describe)):this.props.disableOpen||(e=r.createElement("div",{className:"section-min__edit"},r.createElement("button",{id:this.props.section+"Edit",className:"color--link cursor--pointer style--none text-left",onClick:this.handleUpdateSection,ref:this.getEdit,"aria-labelledby":this.props.section+"Title "+this.props.section+"Edit"},r.createElement(c,null),r.createElement(a.Z,{id:"setting_item_min.edit",defaultMessage:"Edit"}))),t=r.createElement("div",{id:this.props.section+"Desc",className:"section-min__describe"},this.props.describe)),r.createElement("div",{className:"section-min",onClick:this.handleUpdateSection},r.createElement("div",{className:"d-flex"},r.createElement("h4",{id:this.props.section+"Title",className:"section-min__title"},this.props.title),this.props.hideEdit?null:e),t)}}p(u,"propTypes",{title:n().oneOfType([n().element,n().string]).isRequired,disableOpen:n().bool,section:n().string.isRequired,updateSection:n().func.isRequired,describe:n().oneOfType([n().element,n().arrayOf(n().element),n().string]),hideEdit:n().bool});const m=u},68538:(e,t,i)=>{"use strict";i.d(t,{Z:()=>f}),i(33948),i(60285);var s=i(45697),n=i.n(s),r=i(67294),a=i(44012),l=i(19728),o=i(92337),c=i(74935),p=i(60291),u=i(95795),m=i(15558),d=i(21843);function h(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function g(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class f extends r.PureComponent{constructor(e){super(e),g(this,"handleCancel",(e=>{this.setState({removeSrc:!1,setDefaultSrc:!1}),this.props.updateSection(e)})),g(this,"handleFileSelected",(()=>{this.confirmButton.current&&this.confirmButton.current.focus()})),g(this,"handleSave",(e=>{e.preventDefault(),this.props.loadingPicture||(this.state.removeSrc?this.props.onRemove():this.state.setDefaultSrc?this.props.onSetDefault():this.props.onSubmit())})),g(this,"handleRemoveSrc",(e=>{e.preventDefault(),this.setState({removeSrc:!0}),this.focusFirstElement()})),g(this,"handleSetDefaultSrc",(e=>{e.preventDefault(),this.setState({setDefaultSrc:!0}),this.focusFirstElement()})),g(this,"handleFileChange",(e=>{this.setState({removeSrc:!1,setDefaultSrc:!1}),this.props.onFileChange(e)})),g(this,"handleInputFile",(()=>{this.selectInput.current.value="",this.selectInput.current.click()})),g(this,"setPicture",(e=>{if(e){this.previewBlob=URL.createObjectURL(e);var t=new FileReader;t.onload=e=>{const t=p.Ii(e.target.result),i=p.vl(t);this.setState({image:this.previewBlob,orientationStyles:i})},t.readAsArrayBuffer(e)}})),g(this,"renderImg",(()=>{const e=this.props.imageContext;if(this.props.file){const t=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?h(Object(i),!0).forEach((function(t){g(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({backgroundImage:"url("+this.state.image+")"},this.state.orientationStyles);return r.createElement("div",{className:"".concat(e,"-img-preview")},r.createElement("div",{className:"img-preview__image"},r.createElement("div",{alt:"".concat(e," image preview"),style:t,className:"".concat(e,"-img-preview")})))}if(this.state.setDefaultSrc)return r.createElement("img",{loading:"lazy",className:"".concat(e,"-img"),alt:"".concat(e," image"),src:this.props.defaultImageSrc});if(this.props.src&&!this.state.removeSrc){const t=r.createElement("img",{loading:"lazy",className:"".concat(e,"-img"),alt:"".concat(e," image"),src:this.props.src});if(!this.props.onRemove&&!this.props.onSetDefault)return t;let i,s;return this.props.onRemove?(i=r.createElement(a.Z,{id:"setting_picture.remove",defaultMessage:"Remove This Icon"}),s=this.handleRemoveSrc):this.props.onSetDefault&&(i=r.createElement(a.Z,{id:"setting_picture.remove_profile_picture",defaultMessage:"Remove Profile Picture"}),s=this.handleSetDefaultSrc),r.createElement("div",{className:"".concat(e,"-img__container")},r.createElement("div",{className:"img-preview__image","aria-hidden":!0},t),r.createElement(m.Z,{delayShow:o.gT.OVERLAY_TIME_DELAY,placement:"right",overlay:r.createElement(l.Z,{id:"removeIcon"},r.createElement("div",{"aria-hidden":!0},i))},r.createElement("button",{"data-testid":"removeSettingPicture",className:"".concat(e,"-img__remove"),onClick:s},r.createElement("span",{"aria-hidden":!0},"Ã—"),r.createElement("span",{className:"sr-only"},i))))}return null})),this.settingList=r.createRef(),this.selectInput=r.createRef(),this.confirmButton=r.createRef(),this.state={image:null,removeSrc:!1,setDefaultSrc:!1}}focusFirstElement(){this.settingList.current&&this.settingList.current.focus()}componentDidMount(){this.focusFirstElement(),this.selectInput.current&&this.selectInput.current.addEventListener("input",this.handleFileSelected)}componentDidUpdate(e){e.file!==this.props.file&&this.setPicture(this.props.file)}componentWillUnmount(){this.previewBlob&&URL.revokeObjectURL(this.previewBlob),this.selectInput.current&&this.selectInput.current.removeEventListener("input",this.handleFileSelected)}render(){const e=this.renderImg();let t,i,s="btn btn-sm",n=!1;return this.props.submitActive||this.state.removeSrc||this.state.setDefaultSrc?s+=" btn-primary":(s+=" btn-inactive disabled",n=!0),e&&(t=r.createElement("li",{className:"setting-list-item",role:"presentation"},e)),this.props.onSubmit&&(i=r.createElement("span",null,r.createElement("input",{"data-testid":"uploadPicture",ref:this.selectInput,className:"hidden",accept:".jpg,.png,.bmp",type:"file",onChange:this.handleFileChange,disabled:this.props.loadingPicture,"aria-hidden":!0,tabIndex:"-1"}),r.createElement("button",{"data-testid":"inputSettingPictureButton",className:"btn btn-sm btn-primary btn-file sel-btn",disabled:this.props.loadingPicture,onClick:this.handleInputFile,"aria-label":(0,c._u)("setting_picture.select","Select")},r.createElement(a.Z,{id:"setting_picture.select",defaultMessage:"Select"})),r.createElement("button",{tabIndex:n?"-1":"0","data-testid":"saveSettingPicture",disabled:n,ref:this.confirmButton,className:s,onClick:this.handleSave,"aria-label":this.props.loadingPicture?(0,c._u)("setting_picture.uploading","Uploading..."):(0,c._u)("setting_picture.save","Save")},r.createElement(d.Z,{loading:this.props.loadingPicture,text:(0,c._u)("setting_picture.uploading","Uploading...")},r.createElement(a.Z,{id:"setting_picture.save",defaultMessage:"Save"}))))),r.createElement("section",{className:"section-max form-horizontal"},r.createElement("h4",{className:"col-xs-12 section-title"},this.props.title),r.createElement("div",{className:"col-xs-offset-3 col-xs-8"},r.createElement("div",{className:"setting-list",ref:this.settingList,tabIndex:"-1","aria-label":this.props.title,"aria-describedby":"setting-picture__helptext"},t,r.createElement("div",{id:"setting-picture__helptext",className:"setting-list-item pt-3"},this.props.helpText),r.createElement("div",{className:"setting-list-item"},r.createElement("hr",null),r.createElement(u.Z,{errors:[this.props.clientError,this.props.serverError],type:"modal"}),i,r.createElement("button",{"data-testid":"cancelSettingPicture",className:"btn btn-link btn-sm theme",href:"#",onClick:this.handleCancel,"aria-label":(0,c._u)("setting_picture.cancel","Cancel")},r.createElement(a.Z,{id:"setting_picture.cancel",defaultMessage:"Cancel"}))))))}}g(f,"defaultProps",{imageContext:"profile"}),g(f,"propTypes",{clientError:n().string,serverError:n().string,src:n().string,defaultImageSrc:n().string,file:n().object,loadingPicture:n().bool,submitActive:n().bool,onRemove:n().func,onSetDefault:n().func,onSubmit:n().func,title:n().string,onFileChange:n().func,updateSection:n().func,imageContext:n().string,maxFileSize:n().number,helpText:n().object})}}]);