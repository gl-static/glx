(self.webpackChunkchatting_webapp=self.webpackChunkchatting_webapp||[]).push([[213],{51507:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var r=a(37703),s=a(14890),n=a(85163),l=a(45697),o=a.n(l),c=(a(33948),a(60285),a(64765),a(23157),a(15306),a(67294)),i=a(44012),p=a(16429),m=a(95795),u=a(89262),d=a(45288);function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class f extends c.PureComponent{constructor(e){super(e),h(this,"handleAllow",(()=>{const e=new URLSearchParams(this.props.location.search),t={responseType:e.get("response_type"),clientId:e.get("client_id"),redirectUri:e.get("redirect_uri"),state:e.get("state"),scope:e.get("store")};this.props.actions.allowOAuth2(t).then((({data:e,error:t})=>{e&&e.redirect?window.location.href=e.redirect:t&&this.setState({error:t.message})}))})),h(this,"handleDeny",(()=>{const e=new URLSearchParams(this.props.location.search).get("redirect_uri");e&&(e.startsWith("https://")||e.startsWith("http://"))?window.location.href=e+"?error=access_denied":u.m.replace("/error")})),this.state={}}componentDidMount(){const e=document.getElementById("antiClickjack");e&&e.parentNode&&e.parentNode.removeChild(e);const t=new URLSearchParams(this.props.location.search).get("client_id");t&&!/^[a-z0-9]+$/.test(t)||this.props.actions.getOAuthAppInfo(t).then((({data:e})=>{e&&this.setState({app:e})}))}render(){const e=this.state.app;if(!e)return null;let t,a;return t=e.icon_url?e.icon_url:p.Z,this.state.error&&(a=c.createElement("div",{className:"prompt__error form-group"},c.createElement(m.Z,{error:this.state.error}))),c.createElement("div",{className:"container-fluid"},c.createElement("div",{className:"prompt"},c.createElement("div",{className:"prompt__heading"},c.createElement("div",{className:"prompt__app-icon"},c.createElement("img",{alt:"prompt icon",src:t,width:"50",height:"50",loading:"lazy"})),c.createElement("div",{className:"text"},c.createElement(d.Z,{id:"authorize.title",defaultMessage:"Authorize **{appName}** to Connect to Your **Mattermost** User Account",values:{appName:e.name}}))),c.createElement("p",null,c.createElement(d.Z,{id:"authorize.app",defaultMessage:"The app **{appName}** would like the ability to access and modify your basic information.",values:{appName:e.name}})),c.createElement("h2",{className:"prompt__allow"},c.createElement(d.Z,{id:"authorize.access",defaultMessage:"Allow **{appName}** access?",values:{appName:e.name}})),c.createElement("div",{className:"prompt__buttons"},c.createElement("button",{type:"submit",className:"btn btn-link authorize-btn",onClick:this.handleDeny},c.createElement(i.Z,{id:"authorize.deny",defaultMessage:"Deny"})),c.createElement("button",{type:"submit",className:"btn btn-primary authorize-btn",onClick:this.handleAllow},c.createElement(i.Z,{id:"authorize.allow",defaultMessage:"Allow"}))),a))}}h(f,"propTypes",{location:o().shape({search:o().string.isRequired}).isRequired,actions:o().shape({getOAuthAppInfo:o().func.isRequired,allowOAuth2:o().func.isRequired}).isRequired});const b=(0,r.connect)(null,(function(e){return{actions:(0,s.bindActionCreators)({getOAuthAppInfo:n.jI,allowOAuth2:n.yT},e)}}))(f)},95795:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var r=a(45697),s=a.n(r),n=(a(33948),a(67294));function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class o extends n.PureComponent{render(){const{error:e=null,errors:t=[],iconClassName:a,margin:r,textClassName:s,type:l}=this.props;if(!e&&0===t.length)return null;let o=e;if(!o)for(const e of t)e&&(o=e);return o?"modal"===l?n.createElement("div",{className:"form-group"},n.createElement("label",{className:"col-sm-12 has-error"},o)):"backstage"===l?n.createElement("div",{className:"pull-left has-error"},n.createElement("label",{className:"control-label"},o)):r?n.createElement("div",{className:"form-group has-error"},n.createElement("label",{className:"control-label"},o)):n.createElement("div",{className:"col-sm-12 ".concat(s||"has-error")},n.createElement("label",{className:"control-label"},n.createElement("i",{className:"fa ".concat(a||"fa-exclamation-circle")})," ",o)):null}}l(o,"propTypes",{type:s().node,error:s().node,textClassName:s().string,iconClassName:s().string,margin:s().bool,errors:s().arrayOf(s().node)}),l(o,"defaultProps",{error:null,errors:[]})}}]);