(self.webpackChunkchatting_webapp=self.webpackChunkchatting_webapp||[]).push([[695],{96512:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var a=n(45697),s=n.n(a),i=(n(39714),n(67294)),l=n(44012),r=n(73727);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends i.PureComponent{render(){return i.createElement("div",{id:"back_button",className:"signup-header"},i.createElement(r.Link,{onClick:this.props.onClick,to:this.props.url},i.createElement(l.Z,{id:"generic_icons.back",defaultMessage:"Back Icon"},(e=>i.createElement("span",{id:"back_button_icon",className:"fa fa-1x fa-angle-left",title:e.toString()}))),i.createElement(l.Z,{id:"web.header.back",defaultMessage:"Back"})))}}o(c,"propTypes",{url:s().string,onClick:s().func}),o(c,"defaultProps",{url:"/"})},95795:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var a=n(45697),s=n.n(a),i=(n(33948),n(67294));function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class r extends i.PureComponent{render(){const{error:e=null,errors:t=[],iconClassName:n,margin:a,textClassName:s,type:l}=this.props;if(!e&&0===t.length)return null;let r=e;if(!r)for(const e of t)e&&(r=e);return r?"modal"===l?i.createElement("div",{className:"form-group"},i.createElement("label",{className:"col-sm-12 has-error"},r)):"backstage"===l?i.createElement("div",{className:"pull-left has-error"},i.createElement("label",{className:"control-label"},r)):a?i.createElement("div",{className:"form-group has-error"},i.createElement("label",{className:"control-label"},r)):i.createElement("div",{className:"col-sm-12 ".concat(s||"has-error")},i.createElement("label",{className:"control-label"},i.createElement("i",{className:"fa ".concat(n||"fa-exclamation-circle")})," ",r)):null}}l(r,"propTypes",{type:s().node,error:s().node,textClassName:s().string,iconClassName:s().string,margin:s().bool,errors:s().arrayOf(s().node)}),l(r,"defaultProps",{error:null,errors:[]})},49810:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Z}),n(64765),n(33948),n(60285);var a=n(37703),s=n(14890),i=n(42560),l=n(89980),r=n(11754),o=n(3695),c=n(99206),p=n(28823),u=n(41609),m=n.n(u),d=(n(88674),n(39714),n(45697)),g=n.n(d),h=n(67294),f=n(44012),b=n(73727),E=n(11106),v=n(89262),N=n(34288),S=n(16406),_=n(391),L=n(96512),w=n(95795),I=n(68492),k=n(19476),U=n(92337),A=n(82251);function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class T extends h.PureComponent{constructor(e){super(e),C(this,"addUserToTeamFromInvite",(async(e,t)=>{const{data:n,error:a}=await this.props.actions.addUserToTeamFromInvite(e,t);n?v.m.push("/"+n.name+"/group/".concat(U.gT.DEFAULT_CHANNEL)):a&&this.handleInvalidInvite(a)})),C(this,"getInviteInfo",(async e=>{const{data:t,error:n}=await this.props.actions.getTeamInviteInfo(e);t?this.setState({serverError:"",loading:!1}):n&&this.handleInvalidInvite(n)})),C(this,"handleInvalidInvite",(e=>{let t;t="store.sql_user.save.max_accounts.app_error"===e.server_error_id||"api.team.add_user_to_team_from_invite.guest.app_error"===e.server_error_id?e.message:h.createElement(f.Z,{id:"signup_user_completed.invalid_invite",defaultMessage:"The invite link was invalid.  Please speak with your Administrator to receive an invitation."}),this.setState({noOpenServerError:!0,loading:!1,serverError:t})})),C(this,"renderSignupControls",(()=>{let e=[];if(this.props.enableSignUpWithEmail&&e.push(h.createElement(b.Link,{className:"btn btn-custom-login btn--full email",key:"email",to:"/signup_email"+window.location.search},h.createElement("span",null,h.createElement(I.Z,{className:"icon fa fa-envelope",component:"span",title:{id:(0,A.t)("signup.email.icon"),defaultMessage:"Email Icon"}}),h.createElement(f.Z,{id:"signup.email",defaultMessage:"Email and Password"})))),this.props.enableSignUpWithGitLab&&e.push(h.createElement("a",{className:"btn btn-custom-login btn--full gitlab",key:"gitlab",href:E.je.getOAuthRoute()+"/gitlab/signup"+window.location.search},h.createElement("span",null,h.createElement("span",{className:"icon"}),h.createElement("span",null,h.createElement(f.Z,{id:"signup.gitlab",defaultMessage:"GitLab Single Sign-On"}))))),this.props.isLicensed&&this.props.enableSignUpWithGoogle&&e.push(h.createElement("a",{className:"btn btn-custom-login btn--full google",key:"google",href:E.je.getOAuthRoute()+"/google/signup"+window.location.search},h.createElement("span",null,h.createElement("span",{className:"icon"}),h.createElement("span",null,h.createElement(f.Z,{id:"signup.google",defaultMessage:"Google Account"}))))),this.props.isLicensed&&this.props.enableSignUpWithOffice365&&e.push(h.createElement("a",{className:"btn btn-custom-login btn--full office365",key:"office365",href:E.je.getOAuthRoute()+"/office365/signup"+window.location.search},h.createElement("span",null,h.createElement("span",{className:"icon"}),h.createElement("span",null,h.createElement(f.Z,{id:"signup.office365",defaultMessage:"Office 365"}))))),this.props.isLicensed&&this.props.enableSignUpWithOpenId){const t={};this.props.openidButtonColor&&(t.backgroundColor=this.props.openidButtonColor);let n=h.createElement(f.Z,{id:"login.openid",defaultMessage:"Open Id"});this.props.openidButtonText&&(n=this.props.openidButtonText),e.push(h.createElement("a",{id:"OpenIdButton",className:"btn btn-custom-login btn--full openid",style:t,key:"openid",href:E.je.getOAuthRoute()+"/openid/signup"+window.location.search},h.createElement("span",null,h.createElement("span",null,n))))}if(this.props.isLicensed&&this.props.enableLDAP){const t=new URLSearchParams(this.props.location.search);t.append("extra","create_ldap");const n="?"+t.toString();let a=h.createElement(f.Z,{id:"signup.ldap",defaultMessage:"AD/LDAP Credentials"});this.props.ldapLoginFieldName&&(a=this.props.ldapLoginFieldName),e.push(h.createElement(b.Link,{className:"btn btn-custom-login btn--full ldap",key:"ldap",to:"/login"+n},h.createElement("span",null,h.createElement(I.Z,{className:"icon fa fa-folder-open fa--margin-top",component:"span",title:{id:(0,A.t)("signup.ldap.icon"),defaultMessage:"AD/LDAP Icon"}}),h.createElement("span",null,a))))}if(this.props.isLicensed&&this.props.enableSAML){let t="";t=window.location.search?"&action=signup":"?action=signup",e.push(h.createElement(b.Link,{className:"btn btn-custom-login btn--full saml",key:"saml",to:"/login/sso/saml"+window.location.search+t},h.createElement("span",null,h.createElement(I.Z,{className:"icon fa fa-lock fa--margin-top",component:"span",title:{id:(0,A.t)("signup.saml.icon"),defaultMessage:"SAML Icon"}}),h.createElement("span",null,this.props.samlLoginButtonText))))}if(0===e.length){const t=h.createElement(f.Z,{id:"signup_user_completed.none",defaultMessage:"No user creation method has been enabled. Please contact an administrator for access."});e=h.createElement(w.Z,{error:t,margin:!0})}else if(1===e.length){if(this.props.enableSignUpWithEmail)return v.m.push("/signup_email"+window.location.search);if(this.props.isLicensed&&this.props.enableLDAP)return v.m.push("/login"+window.location.search)}return e}));let t=!1,n="",a=!1,s=!1;if(this.props.location.search){const i=new URLSearchParams(this.props.location.search);let l=i.get("t");null==l&&(l="");let r=i.get("id");null==r&&(r=""),r?t=!0:this.props.loggedIn?r||this.props.enableOpenServer||this.props.noAccounts||(a=!0,n=h.createElement(f.Z,{id:"signup_user_completed.no_open_server",defaultMessage:"This server does not allow open signups.  Please speak with your Administrator to receive an invitation."})):s=e.usedBefore}this.state={loading:t,serverError:n,noOpenServerError:a,usedBefore:s}}componentDidMount(){this.props.actions.removeGlobalItem("team");let e=!1;if(!m()(this.props.subscriptionStats)){const{is_paid_tier:t,remaining_seats:n}=this.props.subscriptionStats;e="false"===t&&n<=0}if(this.props.isCloud&&e)v.m.push("/error?type=max_free_users_reached");else if(this.props.location.search){const e=new URLSearchParams(this.props.location.search),t=e.get("t")||"",n=e.get("id")||"",a=this.props.loggedIn;(n||t)&&a?this.addUserToTeamFromInvite(t,n):n?this.getInviteInfo(n):a&&N.mc()}}render(){if(this.state.loading)return h.createElement(k.Z,null);if(this.state.usedBefore)return h.createElement("div",null,h.createElement(f.Z,{id:"signup_user_completed.expired",defaultMessage:"You've already completed the signup process for this invitation or this invitation has expired."}));let e,t=null;return this.state.serverError&&(t=h.createElement("div",{className:"form-group has-error"},h.createElement("label",{className:"control-label"},this.state.serverError))),e=this.state.noOpenServerError||this.state.usedBefore?null:this.renderSignupControls(),h.createElement("div",null,h.createElement(_.Z,null),h.createElement(L.Z,null),h.createElement("div",{className:"col-sm-12"},h.createElement("div",{className:"signup-team__container"},h.createElement("img",{alt:"signup team logo",className:"signup-team-logo",src:S.Z,loading:"lazy"}),h.createElement("div",{className:"signup__content"},h.createElement("h1",null,this.props.siteName),h.createElement("h4",{className:"color--light"},h.createElement(f.Z,{id:"web.root.signup_info"})),h.createElement("div",{className:"mt-8"},h.createElement("h5",null,h.createElement("strong",null,h.createElement(f.Z,{id:"signup.title",defaultMessage:"Create an account with:"})))),e,t),h.createElement("span",{className:"color--light"},h.createElement(f.Z,{id:"signup_user_completed.haveAccount",defaultMessage:"Already have an account?"})," ",h.createElement(b.Link,{to:"/login"+this.props.location.search},h.createElement(f.Z,{id:"signup_user_completed.signIn",defaultMessage:"Click here to sign in."}))))))}}C(T,"propTypes",{location:g().object,loggedIn:g().bool.isRequired,isLicensed:g().bool.isRequired,enableOpenServer:g().bool.isRequired,noAccounts:g().bool.isRequired,enableSignUpWithEmail:g().bool.isRequired,enableSignUpWithGitLab:g().bool.isRequired,enableSignUpWithGoogle:g().bool.isRequired,enableSignUpWithOffice365:g().bool.isRequired,enableSignUpWithOpenId:g().bool,enableLDAP:g().bool.isRequired,enableSAML:g().bool.isRequired,samlLoginButtonText:g().string,siteName:g().string,usedBefore:g().string,ldapLoginFieldName:g().string.isRequired,openidButtonText:g().string,openidButtonColor:g().string,subscriptionStats:g().object,isCloud:g().bool,actions:g().shape({removeGlobalItem:g().func.isRequired,getTeamInviteInfo:g().func.isRequired,addUserToTeamFromInvite:g().func.isRequired}).isRequired});const Z=(0,a.connect)((function(e,t){const n=(0,i.lJ)(e),a=(0,i.iE)(e),s=n&&"true"===n.Cloud,r=s?(0,i.F3)(e):{},c=n&&"true"===n.IsLicensed,p="true"===a.EnableOpenServer,u="true"===a.NoAccounts,m="true"===a.EnableSignUpWithEmail,d="true"===a.EnableSignUpWithGitLab,g="true"===a.EnableSignUpWithGoogle,h="true"===a.EnableSignUpWithOffice365,f="true"===a.EnableLdap,b="true"===a.EnableSaml,E=a.SamlLoginButtonText,v=a.LdapLoginFieldName,N=a.SiteName;let S;if(t.location.search){let n=new URLSearchParams(t.location.search).get("t");null==n&&(n=""),S=(0,o.Vx)(e,n,null)}return{loggedIn:Boolean((0,l.rc)(e)),isLicensed:c,isCloud:s,enableOpenServer:p,noAccounts:u,enableSignUpWithEmail:m,enableSignUpWithGitLab:d,enableSignUpWithGoogle:g,enableSignUpWithOffice365:h,enableLDAP:f,enableSAML:b,samlLoginButtonText:E,ldapLoginFieldName:v,siteName:N,usedBefore:S,subscriptionStats:r}}),(function(e){return{actions:(0,s.bindActionCreators)({removeGlobalItem:c.ul,getTeamInviteInfo:r.sS,addUserToTeamFromInvite:p.UI},e)}}))(T)},16406:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a=n.p+"files/7c11bcdd056cc8e521c9a6047942faaa.png"}}]);